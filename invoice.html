<!DOCTYPE html>
<html>
<head>
    <title>Create Invoice</title>
    <style>
        body { font-family: Arial; margin: 20px; }
        table { width: 100%; border-collapse: collapse; margin-top: 15px; }
        th, td { border: 1px solid #444; padding: 6px; text-align: center; }
        th { background: #f2f2f2; }
        input, select { width: 100%; padding: 4px; }
        .btn { padding: 8px 15px; margin-top: 10px; }
    </style>
</head>
<body>

<h2>Create GST Invoice</h2>

<form method="POST">

    <!-- Invoice Number -->
    <label>Invoice Number</label>
    <input type="text" name="invoice_no" placeholder="Leave blank for auto">
	
    <!-- Invoice Date -->
	<label>Invoice Date:</label><br>
	<input type="date" name="invoice_date" required><br><br>

    <!-- Seller -->
    <label>Seller</label>
    <select name="seller_id" required>
        <option value="">Select Seller</option>
        {% for s in sellers %}
            <option value="{{ s.id }}">{{ s.name }}</option>
        {% endfor %}
    </select>

    <!-- Receiver -->
    <label>Receiver</label>
    <select name="receiver_id" required>
        <option value="">Select Receiver</option>
        {% for r in receivers %}
            <option value="{{ r.id }}">{{ r.name }}</option>
        {% endfor %}
    </select>

    <!-- Products Table -->
    <table>
        <thead>
            <tr>
                <th>Product</th>
                <th>Rate</th>
                <th>Qty</th>
                <th>Discount</th>
            </tr>
        </thead>
        <tbody id="productRows">
            <tr>
                <td>
                    <select name="product_id[]" required>
                        <option value="">Select</option>
                        {% for p in products %}
                            <option value="{{ p.id }}">{{ p.name }}</option>
                        {% endfor %}
                    </select>
                </td>
                <td><input type="number" step="0.01" name="rate[]" required></td>
                <td><input type="number" step="0.01" name="qty[]" required></td>
                <td><input type="number" step="0.01" name="discount[]" value="0"></td>
            </tr>
        </tbody>
    </table>

    <button type="button" class="btn" onclick="addRow()">âž• Add Product</button>

    <br><br>
    <button type="submit" class="btn">ðŸ’¾ Save Invoice</button>

</form>

<script>
function addRow() {
    const row = `
    <tr>
        <td>
            <select name="product_id[]" required>
                <option value="">Select</option>
                {% for p in products %}
                    <option value="{{ p.id }}">{{ p.name }}</option>
                {% endfor %}
            </select>
        </td>
        <td><input type="number" step="0.01" name="rate[]" required></td>
        <td><input type="number" step="0.01" name="qty[]" required></td>
        <td><input type="number" step="0.01" name="discount[]" value="0"></td>
    </tr>`;
    document.getElementById("productRows").insertAdjacentHTML("beforeend", row);
}
</script>

</body>
</html>
